function playGame(gameType) {
            document.getElementById('home-page').style.display = 'none';
            
            if (gameType === 'resilient-zone') {
                document.getElementById('resilient-zone-game').classList.add('active');
                resetResilientGame();
            } else if (gameType === 'mindful-heart') {
                document.getElementById('mindful-heart-game').classList.add('active');
                showActivity('breathing');
            } else if (gameType === 'emotion-quizzes') {
                document.getElementById('emotion-quizzes-game').classList.add('active');
                showQuizSelection();
            }
        }

        // Quiz System Variables
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let quizScore = 0;
        let selectedAnswer = null;
        let quizData = {};

        // Quiz Questions Data
        const quizzes = {
            'needs-wants': {
                title: 'Needs vs Wants Quiz',
                icon: '🎯',
                theme: 'linear-gradient(135deg, #2ecc71, #27ae60)',
                questions: [
                    {
                        question: "Which of the following statements is true?",
                        options: [
                            "Everyone needs a pencil to survive",
                            "We all share the need to have clean drinking water",
                            "Only some people need love for a healthy life",
                            "A new phone is a shared need that everyone has"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which of the following is not a basic human need for happiness, life, and learning?",
                        options: [
                            "safety",
                            "video games",
                            "water",
                            "shelter"
                        ],
                        correct: 1
                    },
                    {
                        question: "To want something does NOT mean which of the following?",
                        options: [
                            "To need something",
                            "To be wishful for something",
                            "To desire something",
                            "To know something"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which of the following statements is true about needs and wants?",
                        options: [
                            "All these statements are correct",
                            "Wants can change from person to person",
                            "Needs are things necessary for a healthy life",
                            "Needs are essential regardless of personal preference"
                        ],
                        correct: 0
                    },
                    {
                        question: "If someone feels happy and safe, this probably means:",
                        options: [
                            "Their basic needs aren't being met",
                            "Their basic needs are being met",
                            "They don't have any needs",
                            "None of the options apply"
                        ],
                        correct: 1
                    },
                    {
                        question: "What are the five necessities for a happy and healthy life?",
                        options: [
                            "Seeing, hearing, tasting, touching, smelling",
                            "Food, water, shelter, clothing, and love",
                            "Money, jewelry, video games, pets, and vacations",
                            "Running, jumping, swimming, cycling, dancing"
                        ],
                        correct: 1
                    }
                ]
            },
            'emotion-awareness': {
                title: 'Emotion Awareness Quiz',
                icon: '💭',
                theme: 'linear-gradient(135deg, #ff6b6b, #ee5a24)',
                questions: [
                    {
                        question: "When needs are not met, you might feel which of the following?",
                        options: [
                            "playful",
                            "restful",
                            "happy",
                            "angry"
                        ],
                        correct: 3
                    },
                    {
                        question: "If you notice you're feeling sad or upset, what's a good first step?",
                        options: [
                            "Ignore the feeling and hope it goes away",
                            "Get angry at yourself for feeling that way",
                            "Pay attention to the feeling and try to understand why",
                            "Pretend you're feeling something else"
                        ],
                        correct: 2
                    },
                    {
                        question: "What are the three main types of needs discussed in the lesson?",
                        options: [
                            "School, home, and playground needs",
                            "Physical, emotional, and social needs",
                            "Morning, afternoon, and evening needs",
                            "Happy, sad, and angry needs"
                        ],
                        correct: 1
                    },
                    {
                        question: "What might you feel when your emotional needs are met?",
                        options: [
                            "Sadness and frustration",
                            "Happiness and contentment",
                            "Anger and irritation",
                            "Confusion and anxiety"
                        ],
                        correct: 1
                    },
                    {
                        question: "Why is it helpful to understand other people's emotions?",
                        options: [
                            "So we can make fun of how they feel",
                            "So we can ignore them better",
                            "So we can understand their needs and help them",
                            "So we can tell them to feel differently"
                        ],
                        correct: 2
                    }
                ]
            },
            'personal-care': {
                title: 'Personal Care Quiz',
                icon: '🌟',
                theme: 'linear-gradient(135deg, #667eea, #764ba2)',
                questions: [
                    {
                        question: "What are some things that can help you get your personal needs met?",
                        options: [
                            "paying attention to what makes me feel happy or fulfilled",
                            "paying attention to what other people want",
                            "tending only to others",
                            "not listening to or feeling my sensations"
                        ],
                        correct: 0
                    }
                ]
            },
            'emotion-families': {
                title: 'Emotion Families Quiz',
                icon: '🎭',
                theme: 'linear-gradient(135deg, #fd79a8, #e84393)',
                questions: [
                    {
                        question: "Which of the following emotions do not belong in the same \"emotion family\"?",
                        options: [
                            "happy",
                            "joyful",
                            "frustrated",
                            "excited"
                        ],
                        correct: 2
                    },
                    {
                        question: "What are \"emotion families\"?",
                        options: [
                            "Groups of people who feel the same way",
                            "Emotions that don't go together",
                            "Emotions that share similarities and can be grouped together",
                            "Family members who show emotions"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which of these emotions belongs to the \"happy\" family?",
                        options: [
                            "Nervous",
                            "Gloomy",
                            "Joyful",
                            "Angry"
                        ],
                        correct: 2
                    },
                    {
                        question: "If someone is feeling \"frustrated,\" which emotion family might that belong to?",
                        options: [
                            "Happy family",
                            "Angry family",
                            "Scared family",
                            "Sad family"
                        ],
                        correct: 1
                    }
                ]
            }
        };

        // Quiz Functions
        function showQuizSelection() {
            document.querySelector('.quiz-selection').style.display = 'block';
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('quiz-results').style.display = 'none';
        }

        function startQuiz(quizType) {
            currentQuiz = quizType;
            currentQuestionIndex = 0;
            quizScore = 0;
            selectedAnswer = null;
            
            const quiz = quizzes[quizType];
            document.getElementById('quiz-icon').textContent = quiz.icon;
            document.getElementById('quiz-title').textContent = quiz.title;
            
            document.querySelector('.quiz-selection').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            document.getElementById('quiz-results').style.display = 'none';
            
            displayQuestion();
        }

        function displayQuestion() {
            const quiz = quizzes[currentQuiz];
            const question = quiz.questions[currentQuestionIndex];
            
            document.getElementById('question-number').textContent = `Question ${currentQuestionIndex + 1} of ${quiz.questions.length}`;
            
            const progress = ((currentQuestionIndex + 1) / quiz.questions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            
            document.getElementById('quiz-question-container').innerHTML = `
                <div style="font-size: 1.3em; font-weight: 600; color: #2f3542; margin-bottom: 25px; line-height: 1.4;">
                    ${question.question}
                </div>
                <div style="display: grid; gap: 15px;">
                    ${question.options.map((option, index) => `
                        <div class="quiz-option" onclick="selectQuizAnswer(${index})" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 12px; padding: 15px 20px; cursor: pointer; transition: all 0.3s ease; font-size: 1.1em;">
                            <span style="font-weight: bold; margin-right: 10px; color: #6c757d;">${String.fromCharCode(97 + index)})</span>
                            ${option}
                        </div>
                    `).join('')}
                </div>
            `;
            
            updateQuizNavigation();
            selectedAnswer = null;
        }

        function selectQuizAnswer(answerIndex) {
            if (selectedAnswer !== null) return;

            selectedAnswer = answerIndex;
            const options = document.querySelectorAll('.quiz-option');
            const correctIndex = quizzes[currentQuiz].questions[currentQuestionIndex].correct;

            options.forEach((option, index) => {
                option.style.pointerEvents = 'none';
                option.style.opacity = '0.7';
                if (index === correctIndex) {
                    option.style.borderColor = '#27ae60';
                    option.style.background = 'linear-gradient(135deg, #d4edda, #c3e6cb)';
                    option.style.color = '#155724';
                } else if (index === answerIndex && index !== correctIndex) {
                    option.style.borderColor = '#e74c3c';
                    option.style.background = 'linear-gradient(135deg, #f8d7da, #f5c6cb)';
                    option.style.color = '#721c24';
                }
                if (index === answerIndex) {
                    option.style.background = option.style.background || 'linear-gradient(135deg, #e3f2fd, #f3e5f5)';
                }
            });

            if (answerIndex === correctIndex) {
                quizScore++;
            }

            document.getElementById('next-btn').disabled = false;
        }

        function nextQuestion() {
            if (selectedAnswer === null) return;

            currentQuestionIndex++;
            if (currentQuestionIndex < quizzes[currentQuiz].questions.length) {
                displayQuestion();
            } else {
                showQuizResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function updateQuizNavigation() {
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            document.getElementById('next-btn').disabled = true;
            
            if (currentQuestionIndex === quizzes[currentQuiz].questions.length - 1) {
                document.getElementById('next-btn').textContent = 'Finish Quiz';
            } else {
                document.getElementById('next-btn').textContent = 'Next Question';
            }
        }

        function showQuizResults() {
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('quiz-results').style.display = 'block';

            const quiz = quizzes[currentQuiz];
            const percentage = Math.round((quizScore / quiz.questions.length) * 100);
            
            document.getElementById('score-circle').textContent = percentage + '%';

            let message, emoji;
            if (percentage >= 90) {
                message = "Outstanding! You have excellent understanding!";
                emoji = "🏆";
                document.getElementById('score-circle').style.background = 'linear-gradient(135deg, #f39c12, #e74c3c)';
            } else if (percentage >= 80) {
                message = "Great job! You have a solid grasp of the concepts!";
                emoji = "🎉";
                document.getElementById('score-circle').style.background = 'linear-gradient(135deg, #27ae60, #2ecc71)';
            } else if (percentage >= 70) {
                message = "Good work! You're developing good understanding!";
                emoji = "👍";
                document.getElementById('score-circle').style.background = 'linear-gradient(135deg, #3498db, #2980b9)';
            } else if (percentage >= 60) {
                message = "Keep practicing to improve your understanding!";
                emoji = "😊";
                document.getElementById('score-circle').style.background = 'linear-gradient(135deg, #f39c12, #d35400)';
            } else {
                message = "Keep learning! Review and try again!";
                emoji = "📚";
                document.getElementById('score-circle').style.background = 'linear-gradient(135deg, #95a5a6, #7f8c8d)';
            }

            document.getElementById('result-emoji').textContent = emoji;
            document.getElementById('score-text').textContent = message;
            document.getElementById('score-details').innerHTML = `
                <h3>Quiz Results</h3>
                <p><strong>Quiz:</strong> ${quiz.title}</p>
                <p><strong>Questions Answered Correctly:</strong> ${quizScore} out of ${quiz.questions.length}</p>
                <p><strong>Accuracy:</strong> ${percentage}%</p>
                <p><strong>Grade:</strong> ${getQuizLetterGrade(percentage)}</p>
            `;

            // Mark quiz as completed
            markQuizCompleted(currentQuiz, percentage);
        }

        function getQuizLetterGrade(percentage) {
            if (percentage >= 90) return 'A';
            if (percentage >= 80) return 'B';
            if (percentage >= 70) return 'C';
            if (percentage >= 60) return 'D';
            return 'F';
        }

        function markQuizCompleted(quizType, score) {
            const statusElement = document.getElementById(quizType + '-status');
            if (score >= 80) {
                statusElement.textContent = '✅';
                statusElement.style.color = '#27ae60';
            } else {
                statusElement.textContent = '⚠️';
                statusElement.style.color = '#f39c12';
            }
        }

        function backToQuizSelection() {
            showQuizSelection();
        }

        function retakeCurrentQuiz() {
            if (currentQuiz) {
                startQuiz(currentQuiz);
            }
        }
